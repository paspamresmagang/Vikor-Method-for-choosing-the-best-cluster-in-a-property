<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Bukit Podomoro Jakarta</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, rgba(4, 136, 83, 0.1), rgba(255, 255, 255, 0.5));
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Navigation Bar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
            background: linear-gradient(to right, #048853, #036944);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a, .logout-button {
            color: #fff;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-links a:hover, .nav-links a.active, .logout-button:hover {
            color: #d1e8d5;
            font-weight: 600;
        }

        /* Sections */
        .section {
            min-height: 100vh;
            padding: 120px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Login Section */
        #adminLogin {
            background: transparent;
        }

        .login-container {
            background: #fff;
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            padding: 40px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            text-align: center;
            animation: fadeIn 0.5s ease-in-out;
        }

        .login-container h2 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #048853;
            margin-bottom: 20px;
        }

        .login-form .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .login-form label {
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            margin-bottom: 8px;
            display: block;
        }

        .login-form input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
            border: 1px solid #ccc;
            transition: border-color 0.3s ease;
        }

        .login-form input:focus {
            border-color: #048853;
            outline: none;
        }

        .login-form button {
            background: #048853;
            color: #fff;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s ease;
        }

        .login-form button:hover {
            background: #036944;
        }

        /* Dashboard Section */
        #adminDashboard {
            display: none;
            background: transparent;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #048853;
            margin-bottom: 30px;
            text-align: center;
        }

        .dashboard-container {
            background: #fff;
            border-radius: 15px;
            width: 100%;
            max-width: 1000px;
            padding: 30px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.5s ease-in-out;
        }

        .dashboard-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .tab-button {
            background: #e0e0e0;
            border-radius: 8px;
            padding: 10px 20px;
            color: #333;
            font-size: 1rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-button.active, .tab-button:hover {
            background: #048853;
            color: #fff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Weights Form */
        .weights-form-container {
            margin-bottom: 20px;
        }

        .weights-form-container h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .weights-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            margin-bottom: 8px;
        }

        .form-group input {
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            border: 1px solid #ccc;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            border-color: #048853;
            outline: none;
        }

        .submit-weights {
            background: #048853;
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            grid-column: span 2;
            justify-self: center;
            transition: background 0.3s ease;
        }

        .submit-weights:hover {
            background: #036944;
        }

        /* Property Management */
        .property-table, .submissions-table, .vikor-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
        }

        .property-table th, .property-table td,
        .submissions-table th, .submissions-table td,
        .vikor-table th, .vikor-table td {
            border: 1px solid #e0e0e0;
            padding: 12px;
            text-align: left;
            font-size: 0.9rem;
        }

        .property-table th, .submissions-table th, .vikor-table th {
            background: #048853;
            color: #fff;
            font-weight: 600;
        }

        .property-table tr:hover, .submissions-table tr:hover, .vikor-table tr:hover {
            background: #f5f5f5;
        }

        .action-buttons button {
            padding: 8px 12px;
            margin-right: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: opacity 0.3s ease;
        }

        .edit-btn {
            background: #007bff;
            color: #fff;
        }

        .delete-btn {
            background: #dc3545;
            color: #fff;
        }

        .action-buttons button:hover {
            opacity: 0.9;
        }

        /* Property Form */
        .property-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .property-form .form-group {
            display: flex;
            flex-direction: column;
        }

        .property-form input, .property-form select {
            padding: 12px;
            border-radius: 8px;
            font-size: 1rem;
            border: 1px solid #ccc;
            transition: border-color 0.3s ease;
        }

        .property-form input:focus, .property-form select:focus {
            border-color: #048853;
            outline: none;
        }

        .property-form button {
            background: #048853;
            color: #fff;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            grid-column: span 2;
            transition: background 0.3s ease;
        }

        .property-form button:hover {
            background: #036944;
        }

        /* VIKOR Results */
        .vikor-results {
            margin-top: 20px;
        }

        .vikor-results h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        /* Footer */
        footer {
            background: linear-gradient(to right, #048853, #036944);
            padding: 20px 0;
            text-align: center;
            font-size: 0.9rem;
            color: #fff;
            position: relative;
            z-index: 1;
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .dashboard-container {
                max-width: 90%;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 15px 20px;
            }

            .logo {
                font-size: 1.2rem;
            }

            .nav-links {
                gap: 15px;
            }

            .nav-links a, .logout-button {
                font-size: 0.9rem;
            }

            .section {
                padding: 80px 20px;
            }

            .section-title {
                font-size: 2rem;
            }

            .property-form, .weights-form {
                grid-template-columns: 1fr;
            }

            .property-table, .submissions-table, .vikor-table {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .nav-links {
                gap: 10px;
            }

            .login-container {
                padding: 20px;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .property-table th, .property-table td,
            .submissions-table th, .submissions-table td,
            .vikor-table th, .vikor-table td {
                padding: 6px;
                font-size: 0.8rem;
            }

            .action-buttons button {
                padding: 6px 8px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar" aria-label="Admin navigation">
        <div class="logo">Admin - Bukit Podomoro Jakarta</div>
        <div class="nav-links">
            <a href="#adminLogin" class="active">Login</a>
            <a href="#adminDashboard" id="dashboardLink" style="display: none;">Dashboard</a>
            <button class="logout-button" onclick="logout()" aria-label="Logout">Logout</button>
        </div>
    </nav>

    <!-- Admin Login Section -->
    <section id="adminLogin" class="section" aria-labelledby="admin-login-title">
        <div class="login-container">
            <h2 id="admin-login-title">Admin Login</h2>
            <form id="adminLoginForm" class="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="adminUsername">Username</label>
                    <input type="text" id="adminUsername" name="username" placeholder="Enter username" required aria-required="true">
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" name="password" placeholder="Enter password" required aria-required="true">
                </div>
                <button type="submit">Login</button>
            </form>
        </div>
    </section>

    <!-- Admin Dashboard Section -->
    <section id="adminDashboard" class="section" aria-labelledby="dashboard-title">
        <h2 class="section-title" id="dashboard-title">Admin Dashboard</h2>
        <div class="dashboard-container">
            <div class="dashboard-tabs">
                <button class="tab-button active" onclick="showTab('propertiesTab')">Manage Properties</button>
                <button class="tab-button" onclick="showTab('submissionsTab')">User Submissions</button>
                <button class="tab-button" onclick="showTab('vikorTab')">VIKOR Ranking</button>
            </div>
            <div id="propertiesTab" class="tab-content active">
                <h3>Manage Properties</h3>
                <form id="propertyForm" class="property-form" onsubmit="addOrUpdateProperty(event)">
                    <div class="form-group">
                        <label for="propertyType">Property Type</label>
                        <input type="text" id="propertyType" name="type" placeholder="e.g., Classic" required>
                    </div>
                    <div class="form-group">
                        <label for="propertyPrice">Price (IDR)</label>
                        <input type="number" id="propertyPrice" name="price" placeholder="e.g., 40000000000" required>
                    </div>
                    <div class="form-group">
                        <label for="propertyArea">Building Area (m²)</label>
                        <input type="number" id="propertyArea" name="area" placeholder="e.g., 146" required>
                    </div>
                    <div class="form-group">
                        <label for="propertyTanah">Land Area (m²)</label>
                        <input type="number" id="propertyTanah" name="tanah" placeholder="e.g., 90" required>
                    </div>
                    <div class="form-group">
                        <label for="propertyBedrooms">Bedrooms</label>
                        <select id="propertyBedrooms" name="bedrooms" required>
                            <option value="3.5">3+1</option>
                            <option value="4.5">4+1</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="propertyBathrooms">Bathrooms</label>
                        <select id="propertyBathrooms" name="bathrooms" required>
                            <option value="3.5">3+1</option>
                            <option value="4.5">4+1</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="propertyCapacity">Capacity</label>
                        <select id="propertyCapacity" name="capacity" required>
                            <option value="5">5 orang</option>
                            <option value="6">6 orang</option>
                            <option value="8">8 orang</option>
                            <option value="9">9 orang</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="propertyImage">Image Path</label>
                        <input type="text" id="propertyImage" name="image" placeholder="e.g., gambar/TIPE 6 CLASSIC.png" required>
                    </div>
                    <div class="form-group">
                        <label for="propertyCluster">Cluster</label>
                        <input type="text" id="propertyCluster" name="cluster" placeholder="e.g., Classic" required>
                    </div>
                    <input type="hidden" id="propertyIndex" name="index">
                    <button type="submit">Add Property</button>
                </form>
                <table class="property-table">
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Price (IDR)</th>
                            <th>Area</th>
                            <th>Land</th>
                            <th>Bedrooms</th>
                            <th>Bathrooms</th>
                            <th>Capacity</th>
                            <th>Cluster</th>
                            <th>Image</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="propertyTableBody"></tbody>
                </table>
            </div>
            <div id="submissionsTab" class="tab-content">
                <h3>User Submissions</h3>
                <table class="submissions-table">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Question</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody id="submissionsTableBody"></tbody>
                </table>
            </div>
            <div id="vikorTab" class="tab-content">
                <h3>VIKOR Ranking</h3>
                <div class="weights-form-container">
                    <h3>Enter Criteria Weights</h3>
                    <form id="weightsForm" class="weights-form" onsubmit="calculateVIKOR(event)">
                        <div class="form-group">
                            <label for="weightPrice">Price (0-1)</label>
                            <input type="number" id="weightPrice" name="weightPrice" step="0.01" min="0" max="1" value="0.2" required>
                        </div>
                        <div class="form-group">
                            <label for="weightArea">Building Area (0-1)</label>
                            <input type="number" id="weightArea" name="weightArea" step="0.01" min="0" max="1" value="0.2" required>
                        </div>
                        <div class="form-group">
                            <label for="weightTanah">Land Area (0-1)</label>
                            <input type="number" id="weightTanah" name="weightTanah" step="0.01" min="0" max="1" value="0.2" required>
                        </div>
                        <div class="form-group">
                            <label for="weightBedrooms">Bedrooms (0-1)</label>
                            <input type="number" id="weightBedrooms" name="weightBedrooms" step="0.01" min="0" max="1" value="0.2" required>
                        </div>
                        <div class="form-group">
                            <label for="weightBathrooms">Bathrooms (0-1)</label>
                            <input type="number" id="weightBathrooms" name="weightBathrooms" step="0.01" min="0" max="1" value="0.2" required>
                        </div>
                        <button type="submit" class="submit-weights">Calculate VIKOR</button>
                    </form>
                </div>
                <div class="vikor-results" id="vikorResults" style="display: none;">
                    <h3>VIKOR Calculation Results</h3>
                    <table class="vikor-table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>S</th>
                                <th>R</th>
                                <th>Q</th>
                                <th>Rank</th>
                            </tr>
                        </thead>
                        <tbody id="vikorTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer aria-label="Footer">
        <div>Copyright by Bukit Podomoro Jakarta All Right Reserved</div>
    </footer>

    <script>
        // Property data
        let properties = [
            { type: "Classic", price: 40000000000, area: 146, tanah: 90, bedrooms: 3.5, bathrooms: 3.5, capacity: 5, image: "gambar/TIPE 6 CLASSIC.png", cluster: "Classic", ranking: 1 },
            { type: "Wales", price: 45000000000, area: 123, tanah: 90, bedrooms: 3.5, bathrooms: 3.5, capacity: 5, image: "gambar/TIPE 6 WALES.png", cluster: "Wales", ranking: 2 },
            { type: "Classic", price: 50000000000, area: 180, tanah: 105, bedrooms: 4.5, bathrooms: 4.5, capacity: 8, image: "gambar/TIPE 7 CLASSIC.png", cluster: "Classic", ranking: 3 },
            { type: "ART Deco", price: 55000000000, area: 180, tanah: 105, bedrooms: 4.5, bathrooms: 4.5, capacity: 8, image: "gambar/TIPE 7 ART DECO.png", cluster: "ART Deco", ranking: 4 },
            { type: "Regent", price: 60000000000, area: 193, tanah: 105, bedrooms: 4.5, bathrooms: 4.5, capacity: 8, image: "gambar/TIPE 7 REGENT.png", cluster: "Regent", ranking: 5 },
            { type: "Windsor", price: 65000000000, area: 138, tanah: 105, bedrooms: 4.5, bathrooms: 3.5, capacity: 6, image: "gambar/TIPE 7 WINDSOR.png", cluster: "Windsor", ranking: 6 },
            { type: "Classic", price: 70000000000, area: 231, tanah: 136, bedrooms: 4.5, bathrooms: 4.5, capacity: 9, image: "gambar/TIPE 8 CLASSIC.png", cluster: "Classic", ranking: 7 },
            { type: "Royal", price: 75000000000, area: 223, tanah: 120, bedrooms: 4.5, bathrooms: 4.5, capacity: 9, image: "gambar/TIPE 8 ROYAL.png", cluster: "Royal", ranking: 8 },
            { type: "Luxury Classic", price: 80000000000, area: 197, tanah: 117, bedrooms: 4.5, bathrooms: 4.5, capacity: 8, image: "gambar/TIPE 9.png", cluster: "Luxury Classic", ranking: 9 },
            { type: "Luxury ART Deco", price: 85000000000, area: 197, tanah: 117, bedrooms: 4.5, bathrooms: 4.5, capacity: 8, image: "gambar/TIPE 9.png", cluster: "Luxury ART Deco", ranking: 10 }
        ];

        // Simulated user submissions storage
        let submissions = JSON.parse(localStorage.getItem('submissions')) || [];

        // Handle admin login
        function handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value.trim();

            if (username === "admin" && password === "admin123") {
                sessionStorage.setItem('isAdminLoggedIn', 'true');
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'flex';
                document.getElementById('dashboardLink').style.display = 'block';
                document.querySelector('.nav-links a[href="#adminLogin"]').classList.remove('active');
                document.querySelector('.nav-links a[href="#adminDashboard"]').classList.add('active');
                updatePropertyTable();
                updateSubmissionsTable();
                document.getElementById('adminDashboard').scrollIntoView({ behavior: 'smooth' });
            } else {
                alert('Invalid username or password');
            }
        }

        // Logout function
        function logout() {
            sessionStorage.removeItem('isAdminLoggedIn');
            document.getElementById('adminLogin').style.display = 'flex';
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('dashboardLink').style.display = 'none';
            document.querySelector('.nav-links a[href="#adminDashboard"]').classList.remove('active');
            document.querySelector('.nav-links a[href="#adminLogin"]').classList.add('active');
            document.getElementById('adminLoginForm').reset();
            document.getElementById('adminLogin').scrollIntoView({ behavior: 'smooth' });
            alert('Logged out successfully.');
        }

        // Tab switching
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
            document.querySelector(`.tab-button[onclick="showTab('${tabId}')"]`).classList.add('active');
        }

        // Update property table
        function updatePropertyTable() {
            const tbody = document.getElementById('propertyTableBody');
            tbody.innerHTML = properties.map((property, index) => `
                <tr>
                    <td>${property.type}</td>
                    <td>Rp ${property.price.toLocaleString('id-ID')}</td>
                    <td>${property.area} m²</td>
                    <td>${property.tanah} m²</td>
                    <td>${property.bedrooms === 3.5 ? '3+1' : '4+1'}</td>
                    <td>${property.bathrooms === 3.5 ? '3+1' : '4+1'}</td>
                    <td>${property.capacity} orang</td>
                    <td>${property.cluster}</td>
                    <td>${property.image}</td>
                    <td class="action-buttons">
                        <button class="edit-btn" onclick="editProperty(${index})">Edit</button>
                        <button class="delete-btn" onclick="deleteProperty(${index})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        // Add or update property
        function addOrUpdateProperty(event) {
            event.preventDefault();
            const form = event.target;
            const index = form.querySelector('#propertyIndex').value;
            const property = {
                type: form.querySelector('#propertyType').value.trim(),
                price: parseInt(form.querySelector('#propertyPrice').value),
                area: parseFloat(form.querySelector('#propertyArea').value),
                tanah: parseFloat(form.querySelector('#propertyTanah').value),
                bedrooms: parseFloat(form.querySelector('#propertyBedrooms').value),
                bathrooms: parseFloat(form.querySelector('#propertyBathrooms').value),
                capacity: parseInt(form.querySelector('#propertyCapacity').value),
                image: form.querySelector('#propertyImage').value.trim(),
                cluster: form.querySelector('#propertyCluster').value.trim(),
                ranking: index ? properties[index].ranking : properties.length + 1
            };

            if (isNaN(property.price) || isNaN(property.area) || isNaN(property.tanah)) {
                alert('Please enter valid numeric values for price, area, and land.');
                return;
            }

            if (index) {
                properties[index] = property;
            } else {
                properties.push(property);
            }

            form.reset();
            form.querySelector('#propertyIndex').value = '';
            form.querySelector('button').textContent = 'Add Property';
            updatePropertyTable();
        }

        // Edit property
        function editProperty(index) {
            const property = properties[index];
            document.getElementById('propertyType').value = property.type;
            document.getElementById('propertyPrice').value = property.price;
            document.getElementById('propertyArea').value = property.area;
            document.getElementById('propertyTanah').value = property.tanah;
            document.getElementById('propertyBedrooms').value = property.bedrooms;
            document.getElementById('propertyBathrooms').value = property.bathrooms;
            document.getElementById('propertyCapacity').value = property.capacity;
            document.getElementById('propertyImage').value = property.image;
            document.getElementById('propertyCluster').value = property.cluster;
            document.getElementById('propertyIndex').value = index;
            document.getElementById('propertyForm').querySelector('button').textContent = 'Update Property';
            document.getElementById('propertiesTab').scrollIntoView({ behavior: 'smooth' });
        }

        // Delete property
        function deleteProperty(index) {
            if (confirm('Are you sure you want to delete this property?')) {
                properties.splice(index, 1);
                properties.forEach((property, i) => property.ranking = i + 1);
                updatePropertyTable();
            }
        }

        // Update submissions table
        function updateSubmissionsTable() {
            const tbody = document.getElementById('submissionsTableBody');
            tbody.innerHTML = submissions.map(submission => `
                <tr>
                    <td>${submission.email}</td>
                    <td>${submission.question}</td>
                    <td>${submission.date}</td>
                </tr>
            `).join('');
        }

        // Simulate form submissions from user site
        function handleFormSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const email = form.querySelector('input[name="email"]').value.trim();
            const question = form.querySelector('textarea[name="question"]').value.trim();
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (!emailPattern.test(email)) {
                alert('Please enter a valid email address.');
                return false;
            }
            if (!question) {
                alert('Please enter your question.');
                return false;
            }

            const submission = {
                email,
                question,
                date: new Date().toLocaleString('id-ID', { timeZone: 'Asia/Jakarta' })
            };
            submissions.push(submission);
            localStorage.setItem('submissions', JSON.stringify(submissions));
            alert(`Thank you! Email: ${email}\nQuestion: ${question}`);
            form.reset();
            updateSubmissionsTable();
            return false;
        }

        // VIKOR calculation
        function calculateVIKOR(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const weights = {
                price: parseFloat(formData.get('weightPrice')),
                area: parseFloat(formData.get('weightArea')),
                tanah: parseFloat(formData.get('weightTanah')),
                bedrooms: parseFloat(formData.get('weightBedrooms')),
                bathrooms: parseFloat(formData.get('weightBathrooms'))
            };

            // Validate weights sum to 1
            const weightSum = Object.values(weights).reduce((sum, w) => sum + w, 0);
            if (Math.abs(weightSum - 1) > 0.01) {
                alert('Sum of weights must equal 1.');
                return;
            }

            // Decision matrix
            const criteria = ['price', 'area', 'tanah', 'bedrooms', 'bathrooms'];
            const matrix = properties.map(property => [
                property.price,
                property.area,
                property.tanah,
                property.bedrooms,
                property.bathrooms
            ]);

            // Normalize decision matrix
            const normalizedMatrix = matrix.map(row => {
                return row.map((value, j) => {
                    const column = matrix.map(r => r[j]);
                    const max = Math.max(...column);
                    const min = Math.min(...column);
                    // Price is cost criterion, others are benefit criteria
                    return j === 0 ? (max - value) / (max - min || 1) : (value - min) / (max - min || 1);
                });
            });

            // Weighted normalized matrix
            const weightsArray = [weights.price, weights.area, weights.tanah, weights.bedrooms, weights.bathrooms];
            const weightedMatrix = normalizedMatrix.map(row => 
                row.map((value, j) => value * weightsArray[j])
            );

            // Ideal and negative-ideal solutions
            const ideal = criteria.map((_, j) => Math.max(...weightedMatrix.map(row => row[j])));
            const negativeIdeal = criteria.map((_, j) => Math.min(...weightedMatrix.map(row => row[j])));

            // Calculate S and R
            const S = weightedMatrix.map(row => 
                row.reduce((sum, value, j) => sum + (ideal[j] - value) / (ideal[j] - negativeIdeal[j] || 1), 0)
            );
            const R = weightedMatrix.map(row => 
                Math.max(...row.map((value, j) => (ideal[j] - value) / (ideal[j] - negativeIdeal[j] || 1)))
            );

            // Calculate Q (v = 0.5 for balanced strategy)
            const v = 0.5;
            const SStar = Math.min(...S);
            const SMinus = Math.max(...S);
            const RStar = Math.min(...R);
            const RMinus = Math.max(...R);
            const Q = S.map((s, i) => {
                const sTerm = (SMinus - SStar) ? (s - SStar) / (SMinus - SStar) : 0;
                const rTerm = (RMinus - RStar) ? (R[i] - RStar) / (RMinus - RStar) : 0;
                return v * sTerm + (1 - v) * rTerm;
            });

            // Rank alternatives
            const results = properties.map((property, i) => ({
                type: property.type,
                S: S[i].toFixed(4),
                R: R[i].toFixed(4),
                Q: Q[i].toFixed(4)
            })).sort((a, b) => a.Q - b.Q);

            // Display VIKOR results
            const vikorTableBody = document.getElementById('vikorTableBody');
            vikorTableBody.innerHTML = results.map((result, index) => `
                <tr>
                    <td>${result.type}</td>
                    <td>${result.S}</td>
                    <td>${result.R}</td>
                    <td>${result.Q}</td>
                    <td>${index + 1}</td>
                </tr>
            `).join('');
            document.getElementById('vikorResults').style.display = 'block';
            showTab('vikorTab');
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                document.getElementById(targetId).scrollIntoView({ behavior: 'smooth' });
                document.querySelectorAll('.nav-links a').forEach(link => link.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Check login status on page load
        window.addEventListener('load', () => {
            if (sessionStorage.getItem('isAdminLoggedIn') === 'true') {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'flex';
                document.getElementById('dashboardLink').style.display = 'inline-block';
                document.querySelector('.nav-links a[href="#adminLogin"]').classList.remove('active');
                document.querySelector('.nav-links a[href="#adminDashboard"]').classList.add('active');
                updatePropertyTable();
                updateSubmissionsTable();
            }
            displayProperties();
        });

        // Display properties for VIKOR table
        function displayProperties() {
            updatePropertyTable();
        }
    </script>
</body>
</html>